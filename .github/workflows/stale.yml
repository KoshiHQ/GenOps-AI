name: 'Close stale issues and PRs'

on:
  schedule:
    - cron: '30 1 * * *'  # Daily at 1:30 AM UTC
  workflow_dispatch:  # Allow manual triggering

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/stale@v9
      with:
        stale-issue-message: >
          This issue has been automatically marked as stale because it has not had
          recent activity. It will be closed if no further activity occurs. Thank you
          for your contributions.
          
          If this issue is still relevant, please add a comment or remove the stale label.
        
        stale-pr-message: >
          This pull request has been automatically marked as stale because it has not had
          recent activity. It will be closed if no further activity occurs. Thank you
          for your contributions.
          
          If you're still working on this, please add a comment or remove the stale label.
        
        close-issue-message: >
          This issue was closed because it has been stalled for too long without activity.
          Feel free to reopen if this is still relevant.
        
        close-pr-message: >
          This PR was closed because it has been stalled for too long without activity.
          Feel free to reopen when you're ready to continue working on it.
        
        days-before-stale: 60
        days-before-close: 14
        stale-issue-label: 'stale'
        stale-pr-label: 'stale'
        exempt-issue-labels: 'pinned,security,good first issue,help wanted'
        exempt-pr-labels: 'pinned,security,work in progress'
        exempt-draft-pr: true
        operations-per-run: 30