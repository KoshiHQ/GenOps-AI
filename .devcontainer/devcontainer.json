{
  "name": "GenOps AI Development",
  "image": "mcr.microsoft.com/devcontainers/python:3.11",
  
  // Features to install
  "features": {
    "ghcr.io/devcontainers/features/git:1": {},
    "ghcr.io/devcontainers/features/github-cli:1": {},
    "ghcr.io/devcontainers/features/docker-outside-of-docker:1": {}
  },

  // Configure tool-specific properties
  "customizations": {
    "vscode": {
      // VS Code settings
      "settings": {
        "python.defaultInterpreterPath": "/usr/local/bin/python",
        "python.linting.enabled": true,
        "python.linting.pylintEnabled": false,
        "python.formatting.provider": "none",
        "python.languageServer": "Pylance",
        "python.analysis.typeCheckingMode": "strict",
        "editor.formatOnSave": true,
        "editor.codeActionsOnSave": {
          "source.organizeImports": true,
          "source.fixAll.ruff": true
        },
        "files.exclude": {
          "**/__pycache__": true,
          "**/.pytest_cache": true,
          "**/.mypy_cache": true,
          "**/.ruff_cache": true
        }
      },
      
      // VS Code extensions to install
      "extensions": [
        "ms-python.python",
        "ms-python.pylance",
        "charliermarsh.ruff",
        "ms-python.pytest",
        "ryanluker.vscode-coverage-gutters",
        "eamodio.gitlens",
        "github.vscode-pull-request-github",
        "yzhang.markdown-all-in-one",
        "redhat.vscode-yaml",
        "tamasfe.even-better-toml",
        "ms-vscode.makefile-tools",
        "gruntfuggly.todo-tree",
        "streetsidesoftware.code-spell-checker"
      ]
    }
  },

  // Development environment setup
  "onCreateCommand": {
    "install-deps": "python -m pip install --upgrade pip && pip install -e '.[dev,openai,anthropic]'",
    "setup-git": "git config --global --add safe.directory ${containerWorkspaceFolder}",
    "setup-precommit": "pre-commit install && pre-commit install --hook-type commit-msg"
  },

  // Post-create setup
  "postCreateCommand": "make validate-env",

  // Development server ports
  "forwardPorts": [
    8000,  // MkDocs serve
    8080,  // Alternative dev server
    3000,  // Grafana (if using local observability stack)
    16686, // Jaeger UI
    9411   // Zipkin UI
  ],

  // Port labels for easier identification
  "portsAttributes": {
    "8000": {
      "label": "MkDocs Documentation",
      "onAutoForward": "openPreview"
    },
    "3000": {
      "label": "Grafana Dashboard"
    },
    "16686": {
      "label": "Jaeger Tracing UI"
    },
    "9411": {
      "label": "Zipkin Tracing UI"
    }
  },

  // Environment variables
  "containerEnv": {
    "PYTHONPATH": "${containerWorkspaceFolder}/src",
    "GENOPS_DEBUG": "true",
    "GENOPS_DEMO_MODE": "true"
  },

  // Mounts for better performance and caching
  "mounts": [
    "source=${localWorkspaceFolderBasename}-node_modules,target=${containerWorkspaceFolder}/node_modules,type=volume",
    "source=${localWorkspaceFolderBasename}-venv,target=${containerWorkspaceFolder}/.venv,type=volume"
  ],

  // Remote user
  "remoteUser": "vscode",

  // Container user arguments
  "updateRemoteUserUID": true,

  // Lifecycle scripts
  "initializeCommand": {
    "info": "echo 'Initializing GenOps AI development environment...'"
  },

  // Development hints
  "otherPortsAttributes": {
    "onAutoForward": "silent"
  },

  // Additional apt packages if needed
  "postStartCommand": {
    "hello": "echo 'GenOps AI development environment is ready! ðŸš€'",
    "show-help": "echo 'Run \"make help\" to see available development commands'"
  }
}